<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="x-UA-compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resona</title>
    <link rel="icon" type="image/png" href="img/logo.png" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- PRELOADER: Shown on initial load -->
    <div id="preloader">
      <div class="loader-content">
        <h1>Resona</h1>
        <div class="spinner"></div>
        <p>Loading your music experience...</p>
      </div>
    </div>

    <!-- AUTHENTICATION CONTAINER: Shown when not logged in -->
    <div id="auth-container" class="hidden">
      <div class="auth-box">
        <!-- Login/Signup Forms will be injected here by app.js -->
      </div>
    </div>
    
    <!-- MAIN APPLICATION: Shown when logged in -->
    <header>
      <!-- =================== LEFT CONTROL DECK =================== -->
      <div class="menu_side">
        <h1>Resona</h1>
        <div class="playlist">
          <h4 class="active" data-playlist="all">
            <span></span><i class="bi bi-house-door-fill"></i> Home
          </h4>
          <h4 data-playlist="liked">
            <span></span><i class="bi bi-heart-fill"></i> Liked Songs
          </h4>
          <h4 data-playlist="library">
            <span></span><i class="bi bi-collection-play-fill"></i> Your Library
          </h4>
          <h4 data-playlist="recent" class="mobile-only">
            <span></span><i class="bi bi-clock-history"></i> Recently Played
          </h4>
        </div>

        <div class="up_next_queue">
          <h4><i class="bi bi-music-note-list"></i> Up Next</h4>
          <div class="queue_list"></div>
        </div>

        <div class="master_play">
            <!-- This div will be tapped on mobile to open the fullscreen view -->
            <div class="song-info-container" id="open_now_playing_view_btn">
                <div class="wave" id="wave">
                    <div class="wave1"></div><div class="wave1"></div><div class="wave1"></div>
                </div>
                <img src="https://placehold.co/180x180/121212/a0a0a0?text=Music" alt="Album Art" id="poster_master_play"/>
                <h5 id="title">Select a Song<div class="subtitle">to start listening</div></h5>
            </div>
            
            <!-- Player controls (seek bar, main buttons) -->
            <div class="player-controls">
                <div class="seek-container">
                    <span id="currentStart">0:00</span>
                    <div class="bar">
                        <input type="range" id="seek" min="0" max="100" value="0" />
                        <div class="bar2" id="bar2"></div>
                        <div class="dot"></div>
                    </div>
                    <span id="currentEnd">0:00</span>
                </div>
                <div class="buttons-container">
                    <i class="bi bi-shuffle" id="shuffle" title="Shuffle"></i>
                    <i class="bi bi-skip-start-fill" id="back" title="Previous"></i>
                    <i class="bi bi-play-circle-fill" id="masterPlay" title="Play"></i>
                    <i class="bi bi-skip-end-fill" id="next" title="Next"></i>
                    <i class="bi bi-repeat" id="repeat" title="Repeat"></i>
                </div>
            </div>
            
            <!-- Side controls (volume, more options menu) -->
            <div class="player-side-controls">
                <!-- The desktop-only volume slider -->
                <div class="vol">
                    <i class="bi bi-volume-up-fill" id="vol_icon"></i>
                    <input type="range" min="0" max="100" id="vol" value="100" />
                    <div class="vol_bar"></div>
                    <div class="dot" id="vol_dot"></div>
                </div>
                
                <!-- The "More Options" menu for both desktop and mobile -->
                <i class="bi bi-three-dots-vertical" id="more_options_btn" title="More Options"></i>
                <div id="more_options_menu" class="hidden">
                    <ul>
                        <li data-action="like"><i class="bi bi-heart" id="like_menu_icon"></i><span id="like_menu_text">Like</span></li>
                        <li data-action="add-to-queue"><i class="bi bi-music-note-list"></i><span>Add to Queue</span></li>
                        <li data-action="sleep-timer"><i class="bi bi-moon-stars-fill"></i><span>Sleep Timer</span></li>
                        <li data-action="lyrics"><i class="bi bi-card-text"></i><span>Show Lyrics</span></li>
                        <li data-action="listen-together"><i class="bi bi-people-fill"></i><span>Listen Together</span></li>
                    </ul>
                </div>
            </div>
        </div>
      </div>

      <!-- =================== RIGHT DISCOVERY ZONE =================== -->
      <div class="song_side">
        <nav>
          <i class="bi bi-list" id="menu_list"></i>
          <i class="bi bi-arrow-left" id="back_to_main_view_btn"></i>
          <ul><li>Discover <span></span></li></ul>
          <i class="bi bi-people-fill" id="listen_together_btn" title="Listen Together"></i>
          <div class="search">
            <i class="bi bi-search"></i>
            <input type="text" placeholder="Search Music..." />
            <div class="search_results"></div>
          </div>
          <div class="user" id="user_profile_button">
            <img src="https://placehold.co/100x100/9146FF/FFF?text=U" alt="User"/>
          </div>
        </nav>

        <div id="discovery_carousels">
            <div class="content">
                <h1>Resona</h1>
                <p>Your personal music hub, powered by dynamic playlists. <br />Click any song to begin.</p>
                <div class="buttons"><button>PLAY</button><button>FOLLOW</button></div>
            </div>
            <div class="popular_song">
                <div class="h4"><h4>Popular Songs</h4><div class="btn_s"><i class="bi bi-arrow-left-short" id="pop_song_left"></i><i class="bi bi-arrow-right-short" id="pop_song_right"></i></div></div>
                <div class="pop_song" id="pop_song_container"></div>
            </div>
            <div class="featured_albums">
                <div class="h4"><h4>Featured Albums</h4><div class="btn_s"><i class="bi bi-arrow-left-short" id="album_left"></i><i class="bi bi-arrow-right-short" id="album_right"></i></div></div>
                <div class="album_cards" id="featured_albums_container"></div>
            </div>
            <div class="language_songs">
                <div class="h4"><h4>Telugu Songs</h4><div class="btn_s"><i class="bi bi-arrow-left-short" id="telugu_song_left"></i><i class="bi bi-arrow-right-short" id="telugu_song_right"></i></div></div>
                <div class="pop_song" id="telugu_songs_container"></div>
            </div>
            <div class="language_songs">
                <div class="h4"><h4>Hindi Songs</h4><div class="btn_s"><i class="bi bi-arrow-left-short" id="hindi_song_left"></i><i class="bi bi-arrow-right-short" id="hindi_song_right"></i></div></div>
                <div class="pop_song" id="hindi_songs_container"></div>
            </div>
            <div class="language_songs">
                <div class="h4"><h4>English Songs</h4><div class="btn_s"><i class="bi bi-arrow-left-short" id="english_song_left"></i><i class="bi bi-arrow-right-short" id="english_song_right"></i></div></div>
                <div class="pop_song" id="english_songs_container"></div>
            </div>
            <div class="language_songs">
                <div class="h4"><h4>Tamil Songs</h4><div class="btn_s"><i class="bi bi-arrow-left-short" id="tamil_song_left"></i><i class="bi bi-arrow-right-short" id="tamil_song_right"></i></div></div>
                <div class="pop_song" id="tamil_songs_container"></div>
            </div>
            <div class="popular_artists">
                <div class="h4"><h4>Popular Artists</h4><div class="btn_s"><i class="bi bi-arrow-left-short" id="pop_artist_left"></i><i class="bi bi-arrow-right-short" id="pop_artist_right"></i></div></div>
                <div class="pop_artist" id="artists_container"></div>
            </div>
        </div>

        <div id="library_view" class="hidden"></div>
        <div id="album_view" class="hidden"></div>
        <div id="artist_view" class="hidden"></div>
        <div id="search_results_view" class="hidden"></div>
        <div id="now_playing_view" class="hidden"></div>

        <div id="profile_modal" class="modal">
          <div class="modal-content">
            <i class="bi bi-x-lg" id="close_modal"></i>
            <div class="profile-info">
              <img src="https://placehold.co/100x100/9146FF/FFF?text=U" alt="User Profile"/>
              <h3 id="profile_username">User</h3>
              <p id="profile_email"></p>
            </div>
            <div class="profile-stats">
              <p>You have <span id="liked_songs_count">0</span> liked songs.</p>
            </div>
            <button class="logout-btn" id="logout_btn">LOG OUT</button>
          </div>
        </div>
      </div>

      <div id="menu_overlay"></div>
      
      <!-- =================== ALL MODALS (WITH FULL CONTENT) =================== -->
      <div id="listen_together_modal" class="modal">
        <div class="modal-content">
          <i class="bi bi-x-lg" id="close_listen_modal"></i>
          <h3>Listen Together</h3>
          <div id="participant_list_container"></div>
          <div id="session_ui_container"></div>
        </div>
      </div>
      
      <div id="lyrics_modal" class="modal">
        <div class="modal-content">
          <i class="bi bi-x-lg" id="close_lyrics_modal"></i>
          <h3 id="lyrics_song_title">Lyrics</h3>
          <div id="lyrics_content" style="white-space: pre-wrap; max-height: 60vh; overflow-y: auto; text-align: center; line-height: 1.8;"></div>
        </div>
      </div>
      
      <div id="sleep_timer_modal" class="modal">
          <div class="modal-content">
              <i class="bi bi-x-lg" id="close_sleep_timer_modal"></i>
              <h6>Sleep Timer</h6>
              <button data-minutes="15">15 minutes</button>
              <button data-minutes="30">30 minutes</button>
              <button data-minutes="45">45 minutes</button>
              <button data-minutes="60">1 hour</button>
              <hr>
              <button id="cancel_sleep_timer_btn" class="hidden">Cancel Timer</button>
          </div>
      </div>

      <div id="add_to_playlist_modal" class="modal">
        <div class="modal-content">
          <i class="bi bi-x-lg" id="close_playlist_modal"></i>
          <h3>Add to Playlist</h3>
          <div id="playlist_options_container"></div>
          <div class="new-playlist-form">
            <input type="text" id="new_playlist_name" placeholder="New Playlist Name..."/>
            <button id="create_playlist_btn">Create & Add</button>
          </div>
        </div>
      </div>
    </header>

    <div id="toast_container"></div>
    <script src="app.js"></script>
  </body>
</html>